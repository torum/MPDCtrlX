<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MPDCtrlX.Core.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:ui="using:FluentAvalonia.UI.Controls"
		xmlns:prop="clr-namespace:MPDCtrlX.Core.Properties"
        xmlns:views="clr-namespace:MPDCtrlX.Core.Views"
		xmlns:mod="clr-namespace:MPDCtrlX.Core.Models"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="MPDCtrlX.Core.Views.MainWindow"
		x:DataType="vm:MainViewModel"
        x:CompileBindings="True"
		Title="MPDCtrlX"
		ExtendClientAreaToDecorationsHint="True"
		ExtendClientAreaChromeHints="PreferSystemChrome"
		MinWidth="320" 
		MinHeight="460">
	<!-- Icon="/Assets/MPDCtrlX.ico" Background="Transparent" ExtendClientAreaToDecorationsHint="True" TransparencyLevelHint="AcrylicBlur" -->
	<!-- {OnPlatform Default='0,120,*,0,Auto,28', Windows='32,120,*,0,Auto,28'} -->
	<!-- ,x:TypeArguments='RowDefinitions' or ,x:TypeArguments='GridLength'-->
	<Interaction.Behaviors>
		<DataTriggerBehavior Binding="{Binding IsBusy}" ComparisonCondition="Equal" Value="True">
			<ChangePropertyAction PropertyName="Cursor" Value="Wait" />
		</DataTriggerBehavior>
		<DataTriggerBehavior Binding="{Binding IsBusy}" ComparisonCondition="Equal" Value="False">
			<ChangePropertyAction PropertyName="Cursor" Value="Arrow" />
		</DataTriggerBehavior>
		<DataTriggerBehavior Binding="{Binding IsWorking}" ComparisonCondition="Equal" Value="True">
			<ChangePropertyAction PropertyName="Cursor" Value="AppStarting" />
		</DataTriggerBehavior>
		<DataTriggerBehavior Binding="{Binding IsWorking}" ComparisonCondition="Equal" Value="False">
			<ChangePropertyAction PropertyName="Cursor" Value="Arrow" />
		</DataTriggerBehavior>
	</Interaction.Behaviors>
	<Window.KeyBindings>
		<KeyBinding Command="{Binding PlayCommand}" Gesture="Play" />
		<!--
		<KeyBinding Command="{Binding PlayCommand}" Gesture="Ctrl+Space" />
		<KeyBinding Command="{Binding PlayCommand}" Gesture="Space"/>
		-->
		<KeyBinding Command="{Binding PlayCommand}" Gesture="Ctrl+P"/>
		<KeyBinding Command="{Binding PlayCommand}" Gesture="MediaPlayPause" />
		<KeyBinding Command="{Binding PlayCommand}" Gesture="MediaStop" />
		<KeyBinding Command="{Binding PlayNextCommand}" Gesture="MediaNextTrack" />
		<KeyBinding Command="{Binding PlayNextCommand}" Gesture="Ctrl+N" />
		<KeyBinding Command="{Binding PlayNextCommand}" Gesture="Ctrl+Right" />
		<KeyBinding Command="{Binding PlayPrevCommand}" Gesture="MediaPreviousTrack" />
		<KeyBinding Command="{Binding PlayPrevCommand}" Gesture="Ctrl+B" />
		<KeyBinding Command="{Binding PlayPrevCommand}" Gesture="Ctrl+Left" />
		<KeyBinding Command="{Binding VolumeMuteCommand}" Gesture="VolumeMute" />
		<KeyBinding Command="{Binding VolumeDownCommand}" Gesture="VolumeDown" />
		<KeyBinding Command="{Binding VolumeDownCommand}" Gesture="Ctrl+OemMinus" />
		<KeyBinding Command="{Binding VolumeDownCommand}" Gesture="Ctrl+Subtract" />
		<KeyBinding Command="{Binding VolumeUpCommand}" Gesture="VolumeUp" />
		<KeyBinding Command="{Binding VolumeUpCommand}" Gesture="Ctrl+OemPlus" />
		<KeyBinding Command="{Binding VolumeUpCommand}" Gesture="Ctrl+Add" />
		<!--
		 Not good for contentdialogs. this steals escape key.
		<KeyBinding Command="{Binding EscapeCommand}" Gesture="Escape" />
		-->
		<!--
		<KeyBinding Command="{Binding ShowSettingsCommand}" Gesture="Ctrl+S"/>
		-->
		<KeyBinding Command="{Binding ShowFindCommand}" Gesture="Ctrl+F"/>
		<!--
		<KeyBinding Gesture="Alt+D" Command="{Binding DevCenterViewActivation}">
			<KeyBinding.CommandParameter>
				<x:Int32>0</x:Int32>
			</KeyBinding.CommandParameter>
		</KeyBinding>
		-->
	</Window.KeyBindings>

	<Grid Margin="{OnPlatform Default='0', Windows='0,32,0,0'}" RowDefinitions="{OnPlatform Default='*,Auto,1,128,Auto,Auto', Windows='*,Auto,1,128,Auto,Auto'}">
		<!--
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="1"/>
			<RowDefinition Height="128"/>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		-->
		<!-- NavigationView -->
		<ui:NavigationView Grid.Row="0" Name="NavigateViewControl" MenuItemsSource="{Binding MainMenuItems, Mode=OneWay}" MenuItemTemplate="{StaticResource NavigationViewMenuItem}" Loaded="NavigationView_Loaded" SelectionFollowsFocus="False" ItemInvoked="NavigationView_ItemInvoked" SelectionChanged="NavigationView_SelectionChanged" IsPaneToggleButtonVisible="True" IsSettingsVisible="False" PaneDisplayMode="Auto" OpenPaneLength="280" IsPaneOpen="{Binding IsNavigationViewMenuOpen, Mode=TwoWay}" Margin="0" ScrollViewer.AllowAutoHide="True" CompactModeThresholdWidth="740" ExpandedModeThresholdWidth="1000" ScrollViewer.VerticalScrollBarVisibility="Visible">
			<!--  NOT GOOD > SelectedItem="{Binding SelectedNodeMenu, Mode=TwoWay}"  SelectedItem="{Binding SelectedNodeMenu, Mode=OneWayToSource}" -->
			<ui:NavigationView.PaneHeader>
				<Grid ColumnDefinitions="*,Auto">

					<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
						<Image x:Name="ImageAppIcon" Width="16" Height="16" Margin="0,0,6,0" Stretch="Uniform" StretchDirection="DownOnly" VerticalAlignment="Center" HorizontalAlignment="Center"/>
						<TextBlock Text="MPDCtrlX" Opacity="0.9" FontWeight="SemiBold" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
					</StackPanel>

					<StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">

						<!-- More options button -->
						<!--
					<Button x:Name="MoreButton" Opacity="0.7" Grid.Column="1" Margin="3,0,4,0" Width="39" Height="36" HorizontalAlignment="Right" VerticalAlignment="Center" ToolTip.Tip="{x:Static prop:Resources.PageMenu_More}" BorderThickness="0" Background="Transparent">
						<Viewbox Width="14" Height="14" HorizontalAlignment="Center" VerticalAlignment="Bottom">
							<PathIcon Background="Transparent" Width="NaN" Height="NaN"
								Data="M10 6C9.30964 6 8.75 5.44036 8.75 4.75C8.75 4.05964 9.30964 3.5 10 3.5C10.6904 3.5 11.25 4.05964 11.25 4.75C11.25 5.44036 10.6904 6 10 6ZM10 11.25C9.30964 11.25 8.75 10.6904 8.75 10C8.75 9.30964 9.30964 8.75 10 8.75C10.6904 8.75 11.25 9.30964 11.25 10C11.25 10.6904 10.6904 11.25 10 11.25ZM8.75 15.25C8.75 15.9404 9.30964 16.5 10 16.5C10.6904 16.5 11.25 15.9404 11.25 15.25C11.25 14.5596 10.6904 14 10 14C9.30964 14 8.75 14.5596 8.75 15.25Z">
							</PathIcon>
						</Viewbox>
						<Button.Flyout>
							<MenuFlyout>
								<MenuItem Header="{x:Static prop:Resources.PageMenu_Preference}" Command="{Binding GoToSettingsCommand}">
									<MenuItem.Icon>
										<PathIcon Background="Transparent" Width="NaN" Height="NaN" Data="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252ZM12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/>
									</MenuItem.Icon>
								</MenuItem>
							</MenuFlyout>
						</Button.Flyout>
					</Button>
					-->
						<!-- or settings button -->

						<Button Width="39" Height="36" Margin="6,0,6,0" HorizontalAlignment="Right" VerticalAlignment="Center" Background="Transparent" BorderThickness="0" Padding="3" Command="{Binding ShowDebugWindowCommand}" Opacity="0.7" Focusable="False" IsVisible="{Binding IsEnableDebugWindow}">
							<Viewbox Width="14" Height="14">
								<PathIcon Background="Transparent" Width="NaN" Height="NaN"
									Data="">
									<Interaction.Behaviors>
										<DataTriggerBehavior Binding="{Binding IsVisible, ElementName=DebugWindow}" ComparisonCondition="Equal" Value="True">
											<ChangePropertyAction PropertyName="Data" Value="M18,7H15.19C14.74,6.2 14.12,5.5 13.37,5L15,3.41L13.59,2L11.42,4.17C10.96,4.06 10.5,4 10,4C9.5,4 9.05,4.06 8.59,4.17L6.41,2L5,3.41L6.62,5C5.87,5.5 5.26,6.21 4.81,7H2V9H4.09C4.03,9.33 4,9.66 4,10V11H2V13H4V14C4,14.34 4.03,14.67 4.09,15H2V17H4.81C6.26,19.5 9.28,20.61 12,19.65C12,19.43 12,19.22 12,19C12,16.46 13.61,14.2 16,13.35V13H18V11H16V10C16,9.66 15.97,9.33 15.91,9H18V7M12,15H8V13H12V15M12,11H8V9H12V11M17.75,22.16L15,19.16L16.16,18L17.75,19.59L21.34,16L22.5,17.41L17.75,22.16Z" />
										</DataTriggerBehavior>
										<DataTriggerBehavior Binding="{Binding IsVisible, ElementName=DebugWindow}" ComparisonCondition="Equal" Value="False">
											<ChangePropertyAction PropertyName="Data" Value="M20,8H17.19C16.74,7.2 16.12,6.5 15.37,6L17,4.41L15.59,3L13.42,5.17C12.96,5.06 12.5,5 12,5C11.5,5 11.05,5.06 10.59,5.17L8.41,3L7,4.41L8.62,6C7.87,6.5 7.26,7.21 6.81,8H4V10H6.09C6.03,10.33 6,10.66 6,11V12H4V14H6V15C6,15.34 6.03,15.67 6.09,16H4V18H6.81C8.47,20.87 12.14,21.84 15,20.18C15.91,19.66 16.67,18.9 17.19,18H20V16H17.91C17.97,15.67 18,15.34 18,15V14H20V12H18V11C18,10.66 17.97,10.33 17.91,10H20V8M16,15A4,4 0 0,1 12,19A4,4 0 0,1 8,15V11A4,4 0 0,1 12,7A4,4 0 0,1 16,11V15M14,10V12H10V10H14M10,14H14V16H10V14Z" />
										</DataTriggerBehavior>
									</Interaction.Behaviors>
								</PathIcon>
							</Viewbox>
						</Button>

						<Button Opacity="0.7" Margin="3,0,4,0" Width="39" Height="36" HorizontalAlignment="Right" VerticalAlignment="Center" ToolTip.Tip="{x:Static prop:Resources.PageMenu_Preference}" Command="{Binding GoToSettingsCommand}" BorderThickness="0" Background="Transparent">
							<Viewbox Width="14" Height="14" HorizontalAlignment="Center" VerticalAlignment="Bottom">
								<PathIcon Background="Transparent" Width="NaN" Height="NaN"
									Data="M7.99994 6C6.89537 6 5.99994 6.89543 5.99994 8C5.99994 9.10457 6.89537 10 7.99994 10C9.10451 10 9.99994 9.10457 9.99994 8C9.99994 6.89543 9.10451 6 7.99994 6ZM6.99994 8C6.99994 7.44772 7.44765 7 7.99994 7C8.55222 7 8.99994 7.44772 8.99994 8C8.99994 8.55228 8.55222 9 7.99994 9C7.44765 9 6.99994 8.55228 6.99994 8ZM10.618 4.39833C10.233 4.46825 9.86392 4.21413 9.7937 3.83074L9.53397 2.41496C9.50816 2.27427 9.39961 2.16301 9.25912 2.13325C8.84818 2.04621 8.42685 2.00195 8 2.00195C7.57289 2.00195 7.1513 2.04627 6.74013 2.13341C6.5996 2.1632 6.49104 2.27452 6.46529 2.41527L6.20629 3.8308C6.1994 3.86844 6.18942 3.90551 6.17647 3.9416C6.04476 4.30859 5.6392 4.49978 5.27062 4.36863L3.91115 3.88463C3.77603 3.83652 3.62511 3.87431 3.52891 3.98033C2.96005 4.60729 2.52892 5.34708 2.2672 6.15302C2.22305 6.28899 2.26562 6.43805 2.37502 6.53053L3.47694 7.46206C3.50626 7.48685 3.53352 7.51399 3.55843 7.5432C3.81177 7.84027 3.77528 8.28558 3.47693 8.53783L2.37502 9.46935C2.26562 9.56183 2.22305 9.71089 2.2672 9.84685C2.52892 10.6528 2.96005 11.3926 3.52891 12.0196C3.62511 12.1256 3.77603 12.1634 3.91115 12.1153L5.27068 11.6312C5.30687 11.6184 5.3441 11.6084 5.38196 11.6015C5.76701 11.5316 6.13608 11.7857 6.2063 12.1691L6.46529 13.5846C6.49104 13.7254 6.5996 13.8367 6.74013 13.8665C7.1513 13.9536 7.57289 13.9979 8 13.9979C8.42685 13.9979 8.84818 13.9537 9.25912 13.8666C9.39961 13.8369 9.50816 13.7256 9.53397 13.5849L9.79368 12.1692C9.8006 12.1314 9.81058 12.0944 9.82353 12.0583C9.95524 11.6913 10.3608 11.5001 10.7294 11.6312L12.0888 12.1153C12.224 12.1634 12.3749 12.1256 12.4711 12.0196C13.04 11.3926 13.4711 10.6528 13.7328 9.84685C13.777 9.71089 13.7344 9.56183 13.625 9.46935L12.5231 8.53782C12.4937 8.51303 12.4665 8.48589 12.4416 8.45667C12.1882 8.1596 12.2247 7.71429 12.5231 7.46205L13.625 6.53053C13.7344 6.43805 13.777 6.28899 13.7328 6.15302C13.4711 5.34708 13.04 4.60729 12.4711 3.98033C12.3749 3.87431 12.224 3.83652 12.0888 3.88463L10.7293 4.36865C10.6931 4.38152 10.6559 4.39146 10.618 4.39833ZM3.99863 4.97726L4.93522 5.3107C5.82017 5.62559 6.79872 5.16815 7.11769 4.2794C7.14903 4.19207 7.17324 4.1021 7.18996 4.01078L7.36738 3.04113C7.5757 3.01512 7.78684 3.00195 8 3.00195C8.213 3.00195 8.42397 3.0151 8.63214 3.04107L8.81011 4.01117C8.98053 4.9408 9.87266 5.55003 10.7967 5.38225C10.8877 5.36572 10.9775 5.34176 11.0647 5.31073L12.0014 4.97726C12.2564 5.31084 12.4684 5.67476 12.6319 6.06064L11.8774 6.6984C11.1566 7.30787 11.0675 8.38649 11.6807 9.10555C11.7408 9.17609 11.8067 9.24166 11.8775 9.3015L12.6319 9.93924C12.4684 10.3251 12.2564 10.689 12.0014 11.0226L11.0646 10.6891C10.1797 10.3742 9.20128 10.8317 8.88231 11.7205C8.85096 11.8078 8.82677 11.8978 8.81004 11.9891L8.63214 12.9588C8.42397 12.9848 8.213 12.9979 8 12.9979C7.78684 12.9979 7.5757 12.9848 7.36738 12.9587L7.18994 11.989C7.01965 11.0592 6.12743 10.4498 5.2033 10.6176C5.11227 10.6342 5.0225 10.6581 4.93528 10.6892L3.99863 11.0226C3.74357 10.689 3.53161 10.3251 3.36814 9.93924L4.12257 9.30148C4.84343 8.69201 4.93254 7.61339 4.31933 6.89433C4.25917 6.82378 4.19332 6.75822 4.12254 6.69838L3.36814 6.06064C3.53161 5.67476 3.74357 5.31084 3.99863 4.97726Z">
								</PathIcon>
							</Viewbox>
						</Button>
						
					</StackPanel>
					
				</Grid>
			</ui:NavigationView.PaneHeader>
			<ui:NavigationView.Resources>
				<DataTemplate x:Key="NavigationViewMenuItem" x:DataType="mod:NodeMenu">
					<ui:NavigationViewItem MenuItemsSource="{Binding Children, Mode=OneWay}" IsExpanded="{Binding Expanded, Mode=TwoWay}" IsSelected="{Binding Selected, Mode=TwoWay}">
						<ui:NavigationViewItem.IconSource>
							<ui:PathIconSource Data="{Binding PathIcon}"/>
						</ui:NavigationViewItem.IconSource>
						<ui:NavigationViewItem.Content>
							<StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,0,0,0">
								<Viewbox Width="15" Height="15" Opacity="1" HorizontalAlignment="Left" Margin="0,0,0,0" IsVisible="False">
									<PathIcon Background="Transparent" Width="NaN" Height="NaN" Margin="0" Padding="0"
										Data="{Binding PathIcon}">
									</PathIcon>
								</Viewbox>
								<TextBlock Text="{Binding Name}" Margin="0,0,0,0"></TextBlock>
							</StackPanel>
						</ui:NavigationViewItem.Content>
					</ui:NavigationViewItem>
				</DataTemplate>
			</ui:NavigationView.Resources>

			<!-- We don't use Navigation frame and Navigate method in Avalonia UI because Avalonia UI does not have a cache mechanism in page navigation... resulting in multiple creation of page instance. -->
			<!-- Use ContentControl in MainView instead.  -->
			<ui:Frame/>
			
		</ui:NavigationView>

		<Grid Grid.Row="1">
			<!-- InfoBar -->
			<ui:InfoBar Title="{Binding InfoBarInfoTitle}" IsOpen="{Binding IsShowInfoWindow, Mode=TwoWay}" IsIconVisible="True" IsClosable="True" Severity="Informational" Message="{Binding InfoBarInfoMessage}" />
			<ui:InfoBar Title="{Binding InfoBarAckTitle}" IsOpen="{Binding IsShowAckWindow, Mode=TwoWay}" IsIconVisible="True" IsClosable="True" Severity="Warning" Message="{Binding InfoBarAckMessage}" />
			<ui:InfoBar Title="{Binding InfoBarErrTitle}" IsOpen="{Binding IsShowErrWindow, Mode=TwoWay}" IsIconVisible="True" IsClosable="True" Severity="Error" Message="{Binding InfoBarErrMessage}" />
		</Grid>

		<!-- Border -->
		<Border Grid.Row="2" Opacity="0.1" BorderThickness="0,1,0,0"></Border>
		
		<!-- Playback control area -->
		<Grid Grid.Row="3">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>
			<Border Grid.Row="0" Grid.RowSpan="2" Background="{DynamicResource LayerFillColorDefaultBrush}" Opacity="0.6"></Border>
			
			<Grid Grid.Row="0" Grid.Column="0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="74"></ColumnDefinition>
					<ColumnDefinition Width="*"></ColumnDefinition>
					<ColumnDefinition Width="74"></ColumnDefinition>
				</Grid.ColumnDefinitions>

				<Grid Grid.Row="0" Grid.Column="0">
					<TextBlock Text="{Binding ElapsedFormatted, Mode=OneWay}" FontSize="12" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="14,0,18,0"></TextBlock>
				</Grid>
				<Border Grid.Row="0" Grid.Column="1" Margin="6,0,6,0">
					<Slider x:Name="SeekSlider" PointerWheelChanged="SeekSlider_PointerWheelChanged" ToolTip.Tip="{x:Static prop:Resources.Playback_SliderSeek}" Maximum="{Binding Mode=OneWay,Path=Time}" Value="{Binding Mode=TwoWay,Path=Elapsed,UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch" VerticalAlignment="Center" Minimum="0" Margin="0" Padding="0"></Slider>
				</Border>
				<Grid Grid.Row="0" Grid.Column="2">
					<TextBlock Text="{Binding TimeFormatted, Mode=OneWay}" FontSize="12" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="18,0,14,0"></TextBlock>
				</Grid>

			</Grid>

			<Grid Grid.Row="1">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="1*"></ColumnDefinition>
					<ColumnDefinition Width="Auto"></ColumnDefinition>
					<ColumnDefinition Width="1*"></ColumnDefinition>
				</Grid.ColumnDefinitions>


				<Grid Grid.Row="0" Grid.Column="0" x:Name="AlbumCoverAndSongTitle" Height="82">
					<Border x:Name="AlbumCover" CornerRadius="3" ClipToBounds="True" Width="70" Height="70" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="8,4,0,8">
						<Grid>
							<PathIcon Background="Transparent" Width="NaN" Height="NaN" Margin="8" Opacity="0.1" HorizontalAlignment="Center" VerticalAlignment="Center"
								Data="M12 15.5q1.471 0 2.486-1.014Q15.5 13.47 15.5 12t-1.014-2.485T12 8.5T9.515 9.515T8.5 12t1.015 2.486T12 15.5m0-2.5q-.425 0-.712-.288T11 12t.288-.712T12 11t.713.288T13 12t-.288.713T12 13m.003 8q-1.867 0-3.51-.708q-1.643-.709-2.859-1.924t-1.925-2.856T3 12.003t.709-3.51Q4.417 6.85 5.63 5.634t2.857-1.925T11.997 3t3.51.709q1.643.708 2.859 1.922t1.925 2.857t.709 3.509t-.708 3.51t-1.924 2.859t-2.856 1.925t-3.509.709M12 20q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8">
							</PathIcon>
							<TransitioningContentControl Content="{Binding AlbumArtBitmapSource, Mode=OneWay}" >
								<TransitioningContentControl.ContentTemplate>
									<DataTemplate DataType="Bitmap">
										<Image Margin="0" Source="{Binding}" Stretch="UniformToFill" VerticalAlignment="Center"/>
									</DataTemplate>
								</TransitioningContentControl.ContentTemplate>
								<TransitioningContentControl.PageTransition>
									<CrossFade Duration="0:00:00.400" />
								</TransitioningContentControl.PageTransition>
							</TransitioningContentControl>
						</Grid>
					</Border>
					<Border x:Name="AlbumCoverBorder" CornerRadius="3" ClipToBounds="True" Width="70" Height="70" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="8,4,0,8" BorderBrush="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="1" Opacity="0.8">
					</Border>
					<Button Background="Transparent" HorizontalAlignment="Left" VerticalAlignment="Stretch" BorderThickness="0" MinWidth="78" Margin="4,0,0,4" VerticalContentAlignment="Top">
						<Button.Flyout>
							<MenuFlyout>
								<MenuItem Header="{x:Static prop:Resources.FlyoutMenu_ScrollIntoNowPlaying}" Command="{Binding ScrollIntoNowPlayingCommand}"/>
								<MenuItem Header="{x:Static prop:Resources.FlyoutMenu_GoToAlbumPage}" Command="{Binding JumpToAlbumPageCommand}" />
								<MenuItem Header="{x:Static prop:Resources.FlyoutMenu_GoToArtistPage}" Command="{Binding JumpToArtistPageCommand}"/>
							</MenuFlyout>
						</Button.Flyout>
						<StackPanel Margin="80,0,0,0" VerticalAlignment="Top">
							<TextBlock x:Name="CurrentSongTitle" Text="{Binding CurrentSongTitle, Mode=OneWay}" FontSize="20" FontWeight="Bold" Opacity="1" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"></TextBlock>
							<TextBlock Opacity="0.8" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" x:Name="CurrentSongArtist" Text="{Binding CurrentSongArtist, Mode=OneWay}" IsVisible="{Binding IsCurrentSongArtistNotNull, Mode=OneWay}"></TextBlock>
							<TextBlock Opacity="0.5" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" x:Name="CurrentSongAlbum" Text="{Binding CurrentSongAlbum, Mode=OneWay}" IsVisible="{Binding IsCurrentSongAlbumNotNull, Mode=OneWay}"></TextBlock>
						</StackPanel>
					</Button>
				</Grid>

				<Grid Grid.Row="0" Grid.Column="1">
					<Grid.RowDefinitions>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"></ColumnDefinition>
						<ColumnDefinition Width="Auto"></ColumnDefinition>
						<ColumnDefinition Width="*"></ColumnDefinition>
					</Grid.ColumnDefinitions>

					<Button Grid.Row="0" Grid.Column="0" x:Name="PlaybackPrev" AutomationProperties.AccessKey="B" ToolTip.Tip="{x:Static prop:Resources.Playback_BackButton}" Command="{Binding PlayPrevCommand}" Focusable="False" Width="30" Height="30" CornerRadius="3" Background="Transparent" BorderThickness="0" Margin="18,0,0,0" HorizontalAlignment="Right" VerticalAlignment="Center" Padding="0">
						<Viewbox Width="18" Height="18">
							<PathIcon Background="Transparent" Width="NaN" Height="NaN"
								Data="M3 20.25a.75.75 0 0 0 1.5 0V3.75a.75.75 0 1 0-1.5 0v16.5ZM18.23 20.475c1.158.83 2.77.002 2.77-1.422V4.83c0-1.384-1.53-2.22-2.695-1.473l-10.47 6.716a1.75 1.75 0 0 0-.074 2.895l10.47 7.507Zm1.27-1.422a.25.25 0 0 1-.396.203l-10.47-7.507a.25.25 0 0 1 .011-.413l10.47-6.717a.25.25 0 0 1 .385.21v14.224Z">
							</PathIcon>
						</Viewbox>
					</Button>
					<Button Grid.Row="0" Grid.Column="1" x:Name="PlaybackPlay" HotKey="Ctrl+Space" AutomationProperties.AccessKey="P" ToolTip.Tip="{x:Static prop:Resources.Playback_PlayPauseButton}" Command="{Binding PlayCommand}" Focusable="False" Width="54" Height="54" CornerRadius="27" Background="Transparent" BorderThickness="0" Margin="18,0,18,0" VerticalAlignment="Center" Padding="0">
						<Viewbox Width="46" Height="46">
							<PathIcon Background="Transparent" Width="NaN" Height="NaN"
								Data="{Binding PlayButton, Mode=OneWay}">
							</PathIcon>
						</Viewbox>
					</Button>
					<Button Grid.Row="0" Grid.Column="2" x:Name="PlaybackBack" AutomationProperties.AccessKey="N" ToolTip.Tip="{x:Static prop:Resources.Playback_NextButton}" Command="{Binding PlayNextCommand}" Focusable="False" Width="30" Height="30" CornerRadius="3" Background="Transparent" BorderThickness="0" Margin="0,0,18,0" HorizontalAlignment="Left" VerticalAlignment="Center" Padding="0">
						<Viewbox Width="18" Height="18">
							<PathIcon Background="Transparent" Width="NaN" Height="NaN"
								Data="M21 3.75a.75.75 0 0 0-1.5 0v16.5a.75.75 0 0 0 1.5 0V3.75ZM5.77 3.525C4.612 2.695 3 3.523 3 4.947V19.17c0 1.384 1.53 2.22 2.695 1.473l10.47-6.716a1.75 1.75 0 0 0 .074-2.895L5.77 3.525ZM4.5 4.947a.25.25 0 0 1 .396-.203l10.47 7.507a.25.25 0 0 1-.011.413l-10.47 6.717a.25.25 0 0 1-.385-.21V4.946Z">
							</PathIcon>
						</Viewbox>
					</Button>
				</Grid>

				<Grid Grid.Row="0" Grid.Column="2">
					<StackPanel Orientation="Horizontal" HorizontalAlignment="Right">

						<WrapPanel Orientation="Horizontal" x:Name="PlaybackOptions" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,48,0">
							<ToggleButton x:Name="RepeatButton" ToolTip.Tip="{x:Static prop:Resources.PlaybackOptions_Repeat}" IsChecked="{Binding Repeat, Mode=TwoWay}" BorderThickness="0" Background="Transparent" Width="24" Height="24" Margin="6,0,0,0">
								<Viewbox Width="14" Height="14">
									<PathIcon Background="Transparent" Width="NaN" Height="NaN"
										Data="m14.61 2.47-.077-.067a.748.748 0 0 0-.983.067l-.068.078a.755.755 0 0 0 .068.987l1.971 1.977H8.5l-.233.004C4.785 5.639 2 8.51 2 12.036c0 1.69.64 3.23 1.692 4.39l.072.069a.751.751 0 0 0 1.08-1.033l-.2-.231A5.009 5.009 0 0 1 3.5 12.035c0-2.771 2.239-5.018 5-5.018h6.881l-1.832 1.84-.067.078a.755.755 0 0 0 .068.987.748.748 0 0 0 1.06 0l3.182-3.193.067-.078a.755.755 0 0 0-.067-.987L14.61 2.47Zm5.62 5.101a.751.751 0 0 0-1.05 1.066 5.01 5.01 0 0 1 1.32 3.398c0 2.772-2.239 5.019-5 5.019H8.558l1.905-1.911.074-.086a.755.755 0 0 0-.007-.902l-.067-.077-.084-.073a.748.748 0 0 0-.9.006l-.076.067-3.182 3.194-.073.085a.755.755 0 0 0 .006.902l.067.077 3.182 3.194.084.072c.293.22.71.195.976-.073a.755.755 0 0 0 .068-.987l-.068-.077-1.899-1.906H15.5l.233-.004C19.215 18.432 22 15.56 22 12.035a6.513 6.513 0 0 0-1.697-4.395l-.073-.069Z">
									</PathIcon>
								</Viewbox>
							</ToggleButton>
							<ToggleButton x:Name="SingleButton" ToolTip.Tip="{x:Static prop:Resources.PlaybackOptions_Single}" IsChecked="{Binding Single, Mode=TwoWay}" BorderThickness="0" Background="Transparent" Width="24" Height="24" Margin="6,0,0,0">
								<Viewbox Width="14" Height="14">
									<PathIcon Background="Transparent" Width="NaN" Height="NaN"
										Data="M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,17H14V7H10V9H12">
									</PathIcon>
								</Viewbox>
							</ToggleButton>
							<ToggleButton x:Name="RandomButton" ToolTip.Tip="{x:Static prop:Resources.PlaybackOptions_Shuffle}" IsChecked="{Binding Random, Mode=TwoWay}" BorderThickness="0" Background="Transparent" Width="24" Height="24" Margin="6,0,0,0">
								<Viewbox Width="14" Height="14">
									<PathIcon Background="Transparent" Width="NaN" Height="NaN"
										Data="M19.2803 4.71967C18.9874 4.42678 18.5126 4.42678 18.2197 4.71967C17.9268 5.01256 17.9268 5.48744 18.2197 5.78033L19.4393 6.99999H19.25C15.332 6.99999 12.8269 9.30232 10.5579 11.3877L10.4925 11.4477C8.15388 13.5968 6.04432 15.5 2.75 15.5C2.33579 15.5 2 15.8358 2 16.25C2 16.6642 2.33579 17 2.75 17C6.66803 17 9.1731 14.6977 11.4421 12.6123L11.4421 12.6123L11.5075 12.5522C13.8461 10.4032 15.9557 8.49999 19.25 8.49999H19.4393L18.2197 9.71966C17.9268 10.0126 17.9268 10.4874 18.2197 10.7803C18.5126 11.0732 18.9874 11.0732 19.2803 10.7803L21.7803 8.28032C21.921 8.13967 22 7.9489 22 7.74999C22 7.55108 21.921 7.36031 21.7803 7.21966L19.2803 4.71967ZM2.75 6.99983C5.99799 6.99983 8.27497 8.58203 10.2514 10.3112C10.1492 10.4048 10.0482 10.4978 9.94821 10.5897L9.81591 10.7113C9.58463 10.9239 9.35843 11.1309 9.13588 11.3316C7.28326 9.73131 5.39993 8.49983 2.75 8.49983C2.33579 8.49983 2 8.16405 2 7.74983C2 7.33562 2.33579 6.99983 2.75 6.99983ZM19.25 16.9998C16.0021 16.9998 13.7251 15.4177 11.7487 13.6885C11.8507 13.5951 11.9515 13.5023 12.0513 13.4105L12.0518 13.4101L12.1841 13.2885C12.4154 13.0759 12.6416 12.8688 12.8642 12.6681C14.7168 14.2684 16.6001 15.4998 19.25 15.4998H19.4393L18.2197 14.2802C17.9268 13.9873 17.9268 13.5124 18.2197 13.2195C18.5126 12.9266 18.9874 12.9266 19.2803 13.2195L21.7803 15.7195C21.921 15.8602 22 16.0509 22 16.2498C22 16.4487 21.921 16.6395 21.7803 16.7802L19.2803 19.2802C18.9874 19.5731 18.5126 19.5731 18.2197 19.2802C17.9268 18.9873 17.9268 18.5124 18.2197 18.2195L19.4393 16.9998H19.25Z">
									</PathIcon>
								</Viewbox>
							</ToggleButton>
							<ToggleButton x:Name="ConsumeButton" ToolTip.Tip="{x:Static prop:Resources.PlaybackOptions_Consume}" IsChecked="{Binding Consume, Mode=TwoWay}" BorderThickness="0" Background="Transparent" Width="24" Height="24" Margin="6,0,6,0">
								<Viewbox Width="14" Height="14">
									<PathIcon Background="Transparent" Width="NaN" Height="NaN"
										Data="M3 5.5C3.55228 5.5 4 5.05228 4 4.5C4 3.94772 3.55228 3.5 3 3.5C2.44772 3.5 2 3.94772 2 4.5C2 5.05228 2.44772 5.5 3 5.5ZM6 4.5C6 4.22386 6.22386 4 6.5 4H17.5C17.7761 4 18 4.22386 18 4.5C18 4.77614 17.7761 5 17.5 5H6.5C6.22386 5 6 4.77614 6 4.5ZM6 9.5C6 9.22386 6.22386 9 6.5 9H17.5C17.7761 9 18 9.22386 18 9.5C18 9.77614 17.7761 10 17.5 10H6.5C6.22386 10 6 9.77614 6 9.5ZM10.0224 15C10.0534 14.6566 10.1159 14.3223 10.207 14H6.5C6.22386 14 6 14.2239 6 14.5C6 14.7761 6.22386 15 6.5 15H10.0224ZM4 14.5C4 15.0523 3.55228 15.5 3 15.5C2.44772 15.5 2 15.0523 2 14.5C2 13.9477 2.44772 13.5 3 13.5C3.55228 13.5 4 13.9477 4 14.5ZM3 10.5C3.55228 10.5 4 10.0523 4 9.5C4 8.94772 3.55228 8.5 3 8.5C2.44772 8.5 2 8.94772 2 9.5C2 10.0523 2.44772 10.5 3 10.5ZM20 15.5C20 17.9853 17.9853 20 15.5 20C13.0147 20 11 17.9853 11 15.5C11 13.0147 13.0147 11 15.5 11C17.9853 11 20 13.0147 20 15.5ZM16.2071 15.5L17.3536 14.3536C17.5488 14.1583 17.5488 13.8417 17.3536 13.6464C17.1583 13.4512 16.8417 13.4512 16.6464 13.6464L15.5 14.7929L14.3536 13.6464C14.1583 13.4512 13.8417 13.4512 13.6464 13.6464C13.4512 13.8417 13.4512 14.1583 13.6464 14.3536L14.7929 15.5L13.6464 16.6464C13.4512 16.8417 13.4512 17.1583 13.6464 17.3536C13.8417 17.5488 14.1583 17.5488 14.3536 17.3536L15.5 16.2071L16.6464 17.3536C16.8417 17.5488 17.1583 17.5488 17.3536 17.3536C17.5488 17.1583 17.5488 16.8417 17.3536 16.6464L16.2071 15.5Z">
									</PathIcon>
								</Viewbox>
							</ToggleButton>
						</WrapPanel>

						<Slider x:Name="VolumeSlider" PointerWheelChanged="VolumeSlider_PointerWheelChanged" Orientation="Vertical" ToolTip.Tip="{x:Static prop:Resources.Playback_SliderVolume}" Value="{Binding Volume,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" VerticalAlignment="Stretch" Margin="0,0,10,10"></Slider>

					</StackPanel>
				</Grid>
				
			</Grid>

		</Grid>

		<!-- Debug Windows -->
		<Grid x:Name="DebugWindow" Grid.Row="4" RowDefinitions="8,*" ColumnDefinitions="1*,8,1*" Height="200" IsVisible="{Binding IsShowDebugWindow, Mode=TwoWay}">

			<TextBox x:Name="DebugCommandTextBox" Grid.Row="1" Grid.Column="0" Text="{Binding DebugCommandText, Mode=OneWay}" Background="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="0" AcceptsReturn="True" Padding="6 0 0 0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" TextWrapping="NoWrap" IsReadOnly="False" IsTabStop="False" Margin="4,0,0,4" MinHeight="24">
			</TextBox>

			<TextBox x:Name="DebugIdleTextBox" Grid.Row="1" Grid.Column="2" Text="{Binding DebugIdleText, Mode=OneWay}" Background="{DynamicResource LayerFillColorDefaultBrush}" BorderThickness="0" AcceptsReturn="True" Padding="6 0 0 0" VerticalAlignment="Stretch" TextWrapping="NoWrap" IsReadOnly="False" IsTabStop="False" Margin="0,0,4,4" MinHeight="24">
			</TextBox>

		</Grid>
		
		<!-- StatusBar -->
		<Border Grid.Row="5" Height="32" Margin="0 0 0 0" BorderThickness="0,1,0,0" BorderBrush="{DynamicResource LayerFillColorDefaultBrush}" Background="{DynamicResource LayerFillColorDefaultBrush}" Opacity="0.6" IsVisible="False">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="24 0 0 0">


					<!-- ConnectionStatusMessage  -->
					<TextBlock Text="{Binding ConnectionStatusMessage}" Margin="6 0 6 0" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" IsVisible="False"></TextBlock>

					<!--
				<Viewbox Width="16" Height="16" Margin="2 0 4 0" Opacity="0.7">
					<Canvas Width="24" Height="24">
						<Path Fill="{DynamicResource ControlForegroundColorBrush}" Data="{Binding StatusButton}" />
					</Canvas>
				</Viewbox>

				<ComboBox Style="{StaticResource ComboBoxFlatStyle}" IsEnabled="{Binding IsProfileSwitchOK}" ItemsSource="{Binding Profiles}" SelectedItem="{Binding SelectedQuickProfile}" Foreground="{DynamicResource ControlForegroundColorBrush}" HorizontalAlignment="Center" Tag="">
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="{Binding Path=Name}"></TextBlock>
							</StackPanel>
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>
			-->
				</StackPanel>

				<Border Grid.Column="1" Background="Transparent" BorderBrush="{DynamicResource CardStrokeBorderBrush}" BorderThickness="0,0,1,0" Opacity="0.5" MaxWidth="4"/>

				<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0 0 2 0">

					<!-- Status Error Icon -->
					<!--
				<Viewbox Width="16" Height="16" Margin="0 0 4 0" Opacity="0.7">
					<Canvas Width="24" Height="24">
						<Path Fill="{DynamicResource ControlDarkColorBrush}" Data="{Binding MpdStatusButton}" />
					</Canvas>
				</Viewbox>
				-->
					<!-- Status Error Message -->
					<TextBlock Text="{Binding MpdStatusMessage}" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="6 0 6 0" Padding="0" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Opacity="0.5"></TextBlock>

				</StackPanel>

				<Border Grid.Column="3" Background="Transparent" BorderBrush="{DynamicResource CardStrokeBorderBrush}" BorderThickness="0,0,1,0" Opacity="0.5" MaxWidth="4"/>

				<StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center" Margin="6 0 6 2">

					<TextBlock Text="{Binding StatusBarMessage}" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="6 0 6 0" Padding="0" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Opacity="0.5"></TextBlock>

				</StackPanel>

				<Border Grid.Column="5" Background="Transparent" BorderBrush="{DynamicResource CardStrokeBorderBrush}" BorderThickness="0,0,1,0" Opacity="0.5" MaxWidth="4"/>

				<StackPanel Grid.Column="6" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0 0 0 0">

					<Button Width="24" Height="24" Margin="6,0,6,0" HorizontalAlignment="Right" VerticalAlignment="Center" Background="Transparent" BorderThickness="0" Padding="3" Command="{Binding ShowDebugWindowCommand}" Opacity="0.7" Focusable="False" IsVisible="{Binding IsEnableDebugWindow}">
						<Viewbox Width="14" Height="14">
							<PathIcon Background="Transparent" Width="NaN" Height="NaN"
								Data="">
								<Interaction.Behaviors>
									<DataTriggerBehavior Binding="{Binding IsVisible, ElementName=DebugWindow}" ComparisonCondition="Equal" Value="True">
										<ChangePropertyAction PropertyName="Data" Value="M18,7H15.19C14.74,6.2 14.12,5.5 13.37,5L15,3.41L13.59,2L11.42,4.17C10.96,4.06 10.5,4 10,4C9.5,4 9.05,4.06 8.59,4.17L6.41,2L5,3.41L6.62,5C5.87,5.5 5.26,6.21 4.81,7H2V9H4.09C4.03,9.33 4,9.66 4,10V11H2V13H4V14C4,14.34 4.03,14.67 4.09,15H2V17H4.81C6.26,19.5 9.28,20.61 12,19.65C12,19.43 12,19.22 12,19C12,16.46 13.61,14.2 16,13.35V13H18V11H16V10C16,9.66 15.97,9.33 15.91,9H18V7M12,15H8V13H12V15M12,11H8V9H12V11M17.75,22.16L15,19.16L16.16,18L17.75,19.59L21.34,16L22.5,17.41L17.75,22.16Z" />
									</DataTriggerBehavior>
									<DataTriggerBehavior Binding="{Binding IsVisible, ElementName=DebugWindow}" ComparisonCondition="Equal" Value="False">
										<ChangePropertyAction PropertyName="Data" Value="M20,8H17.19C16.74,7.2 16.12,6.5 15.37,6L17,4.41L15.59,3L13.42,5.17C12.96,5.06 12.5,5 12,5C11.5,5 11.05,5.06 10.59,5.17L8.41,3L7,4.41L8.62,6C7.87,6.5 7.26,7.21 6.81,8H4V10H6.09C6.03,10.33 6,10.66 6,11V12H4V14H6V15C6,15.34 6.03,15.67 6.09,16H4V18H6.81C8.47,20.87 12.14,21.84 15,20.18C15.91,19.66 16.67,18.9 17.19,18H20V16H17.91C17.97,15.67 18,15.34 18,15V14H20V12H18V11C18,10.66 17.97,10.33 17.91,10H20V8M16,15A4,4 0 0,1 12,19A4,4 0 0,1 8,15V11A4,4 0 0,1 12,7A4,4 0 0,1 16,11V15M14,10V12H10V10H14M10,14H14V16H10V14Z" />
									</DataTriggerBehavior>
								</Interaction.Behaviors>
							</PathIcon>
						</Viewbox>
					</Button>


				</StackPanel>

			</Grid>
		</Border>

	</Grid>
</Window>
